server {
    listen 443 ssl http2; # IMPORTANTE: 'http2' es obligatorio para gRPC
    server_name api.tu-dominio.com;

    # Tus certificados (Let's Encrypt o propios)
    ssl_certificate /etc/letsencrypt/live/api.tu-dominio.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/api.tu-dominio.com/privkey.pem;

    location / {
        # En lugar de proxy_pass, usamos grpc_pass
        grpc_pass grpc://localhost:50051;
        
        # Tiempos de espera (gRPC suele mantener conexiones largas)
        grpc_read_timeout 300s;
        grpc_send_timeout 300s;
    }
}